# This file holds the configuration for what to do when Bash starts.

# This is so I don't miss my appointments!
# Shows the current month and the next one
cal -A 1
echo
echo "Compromissos para os próximos 7 dias:"
echo

# strftime-style formatting, print to screen and copy to briefing.txt
calcurse -r7 --format-apt='- %S -> %E\n\t%m\n%N' | tee ~/.briefing.txt
echo
echo "Você pode olhar os compromissos no arquivo briefing.txt também com o comando 'briefme'."
echo

# Check if .pploweumoney exists
if [ -f ~/.pploweumoney  ]; then
        echo " ** Alguém está devendo dinheiro pra você! Olhe o arquivo .pploweumoney! **"
    fi

# Auto-pull all the Git repos in your home folder
echo "Doing a git pull in all the repositories in this computer..."

# Removing old .local_repos.txt if it exists
if [ -f ~/.local_repos.txt ]
then
  rm ~/.local_repos.txt
fi

for base_dir in $(find ~ -type d)
do
    if [ -d "$base_dir/.git" ]
  then
    echo "Git repo found in $base_dir" | tee -a ~/.local_repos.txt
    echo "Pulling repo"
    cd "$base_dir"
    git pull
  fi
done

echo "Finishing... found repo names were saved in ~/.local_repos.txt"
echo "If the shell takes too long to start up, you might want to remove the repos you don't use"
cd "$HOME"
